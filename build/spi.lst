ARM GAS  /tmp/ccxdJPvT.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"spi.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.rodata.MX_SPI3_Init.str1.4,"aMS",%progbits,1
  20              		.align	2
  21              	.LC0:
  22 0000 426F6172 		.ascii	"Board/v3/Src/spi.c\000"
  22      642F7633 
  22      2F537263 
  22      2F737069 
  22      2E6300
  23              		.section	.text.MX_SPI3_Init,"ax",%progbits
  24              		.align	1
  25              		.global	MX_SPI3_Init
  26              		.syntax unified
  27              		.thumb
  28              		.thumb_func
  30              	MX_SPI3_Init:
  31              	.LFB133:
  32              		.file 1 "Board/v3/Src/spi.c"
   1:Board/v3/Src/spi.c **** /**
   2:Board/v3/Src/spi.c ****   ******************************************************************************
   3:Board/v3/Src/spi.c ****   * File Name          : SPI.c
   4:Board/v3/Src/spi.c ****   * Description        : This file provides code for the configuration
   5:Board/v3/Src/spi.c ****   *                      of the SPI instances.
   6:Board/v3/Src/spi.c ****   ******************************************************************************
   7:Board/v3/Src/spi.c ****   * This notice applies to any and all portions of this file
   8:Board/v3/Src/spi.c ****   * that are not between comment pairs USER CODE BEGIN and
   9:Board/v3/Src/spi.c ****   * USER CODE END. Other portions of this file, whether 
  10:Board/v3/Src/spi.c ****   * inserted by the user or by software development tools
  11:Board/v3/Src/spi.c ****   * are owned by their respective copyright owners.
  12:Board/v3/Src/spi.c ****   *
  13:Board/v3/Src/spi.c ****   * Copyright (c) 2018 STMicroelectronics International N.V. 
  14:Board/v3/Src/spi.c ****   * All rights reserved.
  15:Board/v3/Src/spi.c ****   *
  16:Board/v3/Src/spi.c ****   * Redistribution and use in source and binary forms, with or without 
  17:Board/v3/Src/spi.c ****   * modification, are permitted, provided that the following conditions are met:
  18:Board/v3/Src/spi.c ****   *
  19:Board/v3/Src/spi.c ****   * 1. Redistribution of source code must retain the above copyright notice, 
  20:Board/v3/Src/spi.c ****   *    this list of conditions and the following disclaimer.
  21:Board/v3/Src/spi.c ****   * 2. Redistributions in binary form must reproduce the above copyright notice,
  22:Board/v3/Src/spi.c ****   *    this list of conditions and the following disclaimer in the documentation
ARM GAS  /tmp/ccxdJPvT.s 			page 2


  23:Board/v3/Src/spi.c ****   *    and/or other materials provided with the distribution.
  24:Board/v3/Src/spi.c ****   * 3. Neither the name of STMicroelectronics nor the names of other 
  25:Board/v3/Src/spi.c ****   *    contributors to this software may be used to endorse or promote products 
  26:Board/v3/Src/spi.c ****   *    derived from this software without specific written permission.
  27:Board/v3/Src/spi.c ****   * 4. This software, including modifications and/or derivative works of this 
  28:Board/v3/Src/spi.c ****   *    software, must execute solely and exclusively on microcontroller or
  29:Board/v3/Src/spi.c ****   *    microprocessor devices manufactured by or for STMicroelectronics.
  30:Board/v3/Src/spi.c ****   * 5. Redistribution and use of this software other than as permitted under 
  31:Board/v3/Src/spi.c ****   *    this license is void and will automatically terminate your rights under 
  32:Board/v3/Src/spi.c ****   *    this license. 
  33:Board/v3/Src/spi.c ****   *
  34:Board/v3/Src/spi.c ****   * THIS SOFTWARE IS PROVIDED BY STMICROELECTRONICS AND CONTRIBUTORS "AS IS" 
  35:Board/v3/Src/spi.c ****   * AND ANY EXPRESS, IMPLIED OR STATUTORY WARRANTIES, INCLUDING, BUT NOT 
  36:Board/v3/Src/spi.c ****   * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY, FITNESS FOR A 
  37:Board/v3/Src/spi.c ****   * PARTICULAR PURPOSE AND NON-INFRINGEMENT OF THIRD PARTY INTELLECTUAL PROPERTY
  38:Board/v3/Src/spi.c ****   * RIGHTS ARE DISCLAIMED TO THE FULLEST EXTENT PERMITTED BY LAW. IN NO EVENT 
  39:Board/v3/Src/spi.c ****   * SHALL STMICROELECTRONICS OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT,
  40:Board/v3/Src/spi.c ****   * INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
  41:Board/v3/Src/spi.c ****   * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, 
  42:Board/v3/Src/spi.c ****   * OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF 
  43:Board/v3/Src/spi.c ****   * LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING 
  44:Board/v3/Src/spi.c ****   * NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS SOFTWARE,
  45:Board/v3/Src/spi.c ****   * EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
  46:Board/v3/Src/spi.c ****   *
  47:Board/v3/Src/spi.c ****   ******************************************************************************
  48:Board/v3/Src/spi.c ****   */
  49:Board/v3/Src/spi.c **** 
  50:Board/v3/Src/spi.c **** /* Includes ------------------------------------------------------------------*/
  51:Board/v3/Src/spi.c **** #include "spi.h"
  52:Board/v3/Src/spi.c **** 
  53:Board/v3/Src/spi.c **** #include "gpio.h"
  54:Board/v3/Src/spi.c **** #include "dma.h"
  55:Board/v3/Src/spi.c **** 
  56:Board/v3/Src/spi.c **** /* USER CODE BEGIN 0 */
  57:Board/v3/Src/spi.c **** 
  58:Board/v3/Src/spi.c **** /* USER CODE END 0 */
  59:Board/v3/Src/spi.c **** 
  60:Board/v3/Src/spi.c **** SPI_HandleTypeDef hspi3;
  61:Board/v3/Src/spi.c **** DMA_HandleTypeDef hdma_spi3_tx;
  62:Board/v3/Src/spi.c **** DMA_HandleTypeDef hdma_spi3_rx;
  63:Board/v3/Src/spi.c **** 
  64:Board/v3/Src/spi.c **** /* SPI3 init function */
  65:Board/v3/Src/spi.c **** void MX_SPI3_Init(void)
  66:Board/v3/Src/spi.c **** {
  33              		.loc 1 66 1 view -0
  34              		.cfi_startproc
  35              		@ args = 0, pretend = 0, frame = 0
  36              		@ frame_needed = 0, uses_anonymous_args = 0
  37 0000 08B5     		push	{r3, lr}
  38              	.LCFI0:
  39              		.cfi_def_cfa_offset 8
  40              		.cfi_offset 3, -8
  41              		.cfi_offset 14, -4
  67:Board/v3/Src/spi.c **** 
  68:Board/v3/Src/spi.c ****   hspi3.Instance = SPI3;
  42              		.loc 1 68 3 view .LVU1
  43              		.loc 1 68 18 is_stmt 0 view .LVU2
ARM GAS  /tmp/ccxdJPvT.s 			page 3


  44 0002 1048     		ldr	r0, .L5
  45 0004 104B     		ldr	r3, .L5+4
  46 0006 0360     		str	r3, [r0]
  69:Board/v3/Src/spi.c ****   hspi3.Init.Mode = SPI_MODE_MASTER;
  47              		.loc 1 69 3 is_stmt 1 view .LVU3
  48              		.loc 1 69 19 is_stmt 0 view .LVU4
  49 0008 4FF48273 		mov	r3, #260
  50 000c 4360     		str	r3, [r0, #4]
  70:Board/v3/Src/spi.c ****   hspi3.Init.Direction = SPI_DIRECTION_2LINES;
  51              		.loc 1 70 3 is_stmt 1 view .LVU5
  52              		.loc 1 70 24 is_stmt 0 view .LVU6
  53 000e 0023     		movs	r3, #0
  54 0010 8360     		str	r3, [r0, #8]
  71:Board/v3/Src/spi.c ****   hspi3.Init.DataSize = SPI_DATASIZE_16BIT;
  55              		.loc 1 71 3 is_stmt 1 view .LVU7
  56              		.loc 1 71 23 is_stmt 0 view .LVU8
  57 0012 4FF40062 		mov	r2, #2048
  58 0016 C260     		str	r2, [r0, #12]
  72:Board/v3/Src/spi.c ****   hspi3.Init.CLKPolarity = SPI_POLARITY_LOW;
  59              		.loc 1 72 3 is_stmt 1 view .LVU9
  60              		.loc 1 72 26 is_stmt 0 view .LVU10
  61 0018 0361     		str	r3, [r0, #16]
  73:Board/v3/Src/spi.c ****   hspi3.Init.CLKPhase = SPI_PHASE_2EDGE;
  62              		.loc 1 73 3 is_stmt 1 view .LVU11
  63              		.loc 1 73 23 is_stmt 0 view .LVU12
  64 001a 0122     		movs	r2, #1
  65 001c 4261     		str	r2, [r0, #20]
  74:Board/v3/Src/spi.c ****   hspi3.Init.NSS = SPI_NSS_SOFT;
  66              		.loc 1 74 3 is_stmt 1 view .LVU13
  67              		.loc 1 74 18 is_stmt 0 view .LVU14
  68 001e 4FF40072 		mov	r2, #512
  69 0022 8261     		str	r2, [r0, #24]
  75:Board/v3/Src/spi.c ****   hspi3.Init.BaudRatePrescaler = SPI_BAUDRATEPRESCALER_16;
  70              		.loc 1 75 3 is_stmt 1 view .LVU15
  71              		.loc 1 75 32 is_stmt 0 view .LVU16
  72 0024 1822     		movs	r2, #24
  73 0026 C261     		str	r2, [r0, #28]
  76:Board/v3/Src/spi.c ****   hspi3.Init.FirstBit = SPI_FIRSTBIT_MSB;
  74              		.loc 1 76 3 is_stmt 1 view .LVU17
  75              		.loc 1 76 23 is_stmt 0 view .LVU18
  76 0028 0362     		str	r3, [r0, #32]
  77:Board/v3/Src/spi.c ****   hspi3.Init.TIMode = SPI_TIMODE_DISABLE;
  77              		.loc 1 77 3 is_stmt 1 view .LVU19
  78              		.loc 1 77 21 is_stmt 0 view .LVU20
  79 002a 4362     		str	r3, [r0, #36]
  78:Board/v3/Src/spi.c ****   hspi3.Init.CRCCalculation = SPI_CRCCALCULATION_DISABLE;
  80              		.loc 1 78 3 is_stmt 1 view .LVU21
  81              		.loc 1 78 29 is_stmt 0 view .LVU22
  82 002c 8362     		str	r3, [r0, #40]
  79:Board/v3/Src/spi.c ****   hspi3.Init.CRCPolynomial = 10;
  83              		.loc 1 79 3 is_stmt 1 view .LVU23
  84              		.loc 1 79 28 is_stmt 0 view .LVU24
  85 002e 0A23     		movs	r3, #10
  86 0030 C362     		str	r3, [r0, #44]
  80:Board/v3/Src/spi.c ****   if (HAL_SPI_Init(&hspi3) != HAL_OK)
  87              		.loc 1 80 3 is_stmt 1 view .LVU25
  88              		.loc 1 80 7 is_stmt 0 view .LVU26
ARM GAS  /tmp/ccxdJPvT.s 			page 4


  89 0032 FFF7FEFF 		bl	HAL_SPI_Init
  90              	.LVL0:
  91              		.loc 1 80 6 view .LVU27
  92 0036 00B9     		cbnz	r0, .L4
  93              	.L1:
  81:Board/v3/Src/spi.c ****   {
  82:Board/v3/Src/spi.c ****     _Error_Handler(__FILE__, __LINE__);
  83:Board/v3/Src/spi.c ****   }
  84:Board/v3/Src/spi.c **** 
  85:Board/v3/Src/spi.c **** }
  94              		.loc 1 85 1 view .LVU28
  95 0038 08BD     		pop	{r3, pc}
  96              	.L4:
  82:Board/v3/Src/spi.c ****   }
  97              		.loc 1 82 5 is_stmt 1 view .LVU29
  98 003a 5221     		movs	r1, #82
  99 003c 0348     		ldr	r0, .L5+8
 100 003e FFF7FEFF 		bl	_Error_Handler
 101              	.LVL1:
 102              		.loc 1 85 1 is_stmt 0 view .LVU30
 103 0042 F9E7     		b	.L1
 104              	.L6:
 105              		.align	2
 106              	.L5:
 107 0044 00000000 		.word	.LANCHOR0
 108 0048 003C0040 		.word	1073757184
 109 004c 00000000 		.word	.LC0
 110              		.cfi_endproc
 111              	.LFE133:
 113              		.section	.text.HAL_SPI_MspInit,"ax",%progbits
 114              		.align	1
 115              		.global	HAL_SPI_MspInit
 116              		.syntax unified
 117              		.thumb
 118              		.thumb_func
 120              	HAL_SPI_MspInit:
 121              	.LVL2:
 122              	.LFB134:
  86:Board/v3/Src/spi.c **** 
  87:Board/v3/Src/spi.c **** void HAL_SPI_MspInit(SPI_HandleTypeDef* spiHandle)
  88:Board/v3/Src/spi.c **** {
 123              		.loc 1 88 1 is_stmt 1 view -0
 124              		.cfi_startproc
 125              		@ args = 0, pretend = 0, frame = 24
 126              		@ frame_needed = 0, uses_anonymous_args = 0
  89:Board/v3/Src/spi.c **** 
  90:Board/v3/Src/spi.c ****   GPIO_InitTypeDef GPIO_InitStruct;
 127              		.loc 1 90 3 view .LVU32
  91:Board/v3/Src/spi.c ****   if(spiHandle->Instance==SPI3)
 128              		.loc 1 91 3 view .LVU33
 129              		.loc 1 91 15 is_stmt 0 view .LVU34
 130 0000 0268     		ldr	r2, [r0]
 131              		.loc 1 91 5 view .LVU35
 132 0002 414B     		ldr	r3, .L22
 133 0004 9A42     		cmp	r2, r3
 134 0006 00D0     		beq	.L19
 135 0008 7047     		bx	lr
ARM GAS  /tmp/ccxdJPvT.s 			page 5


 136              	.L19:
  88:Board/v3/Src/spi.c **** 
 137              		.loc 1 88 1 view .LVU36
 138 000a F0B5     		push	{r4, r5, r6, r7, lr}
 139              	.LCFI1:
 140              		.cfi_def_cfa_offset 20
 141              		.cfi_offset 4, -20
 142              		.cfi_offset 5, -16
 143              		.cfi_offset 6, -12
 144              		.cfi_offset 7, -8
 145              		.cfi_offset 14, -4
 146 000c 87B0     		sub	sp, sp, #28
 147              	.LCFI2:
 148              		.cfi_def_cfa_offset 48
 149 000e 0446     		mov	r4, r0
  92:Board/v3/Src/spi.c ****   {
  93:Board/v3/Src/spi.c ****   /* USER CODE BEGIN SPI3_MspInit 0 */
  94:Board/v3/Src/spi.c **** 
  95:Board/v3/Src/spi.c ****   /* USER CODE END SPI3_MspInit 0 */
  96:Board/v3/Src/spi.c ****     /* SPI3 clock enable */
  97:Board/v3/Src/spi.c ****     __HAL_RCC_SPI3_CLK_ENABLE();
 150              		.loc 1 97 5 is_stmt 1 view .LVU37
 151              	.LBB2:
 152              		.loc 1 97 5 view .LVU38
 153 0010 0025     		movs	r5, #0
 154 0012 0095     		str	r5, [sp]
 155              		.loc 1 97 5 view .LVU39
 156 0014 03F5FE33 		add	r3, r3, #130048
 157 0018 1A6C     		ldr	r2, [r3, #64]
 158 001a 42F40042 		orr	r2, r2, #32768
 159 001e 1A64     		str	r2, [r3, #64]
 160              		.loc 1 97 5 view .LVU40
 161 0020 1B6C     		ldr	r3, [r3, #64]
 162 0022 03F40043 		and	r3, r3, #32768
 163 0026 0093     		str	r3, [sp]
 164              		.loc 1 97 5 view .LVU41
 165 0028 009B     		ldr	r3, [sp]
 166              	.LBE2:
 167              		.loc 1 97 5 view .LVU42
  98:Board/v3/Src/spi.c ****   
  99:Board/v3/Src/spi.c ****     /**SPI3 GPIO Configuration    
 100:Board/v3/Src/spi.c ****     PC10     ------> SPI3_SCK
 101:Board/v3/Src/spi.c ****     PC11     ------> SPI3_MISO
 102:Board/v3/Src/spi.c ****     PC12     ------> SPI3_MOSI 
 103:Board/v3/Src/spi.c ****     */
 104:Board/v3/Src/spi.c ****     GPIO_InitStruct.Pin = GPIO_PIN_10|GPIO_PIN_12;
 168              		.loc 1 104 5 view .LVU43
 169              		.loc 1 104 25 is_stmt 0 view .LVU44
 170 002a 4FF4A053 		mov	r3, #5120
 171 002e 0193     		str	r3, [sp, #4]
 105:Board/v3/Src/spi.c ****     GPIO_InitStruct.Mode = GPIO_MODE_AF_PP;
 172              		.loc 1 105 5 is_stmt 1 view .LVU45
 173              		.loc 1 105 26 is_stmt 0 view .LVU46
 174 0030 0223     		movs	r3, #2
 175 0032 0293     		str	r3, [sp, #8]
 106:Board/v3/Src/spi.c ****     GPIO_InitStruct.Pull = GPIO_PULLDOWN; // Idle clock and MOSI low.
 176              		.loc 1 106 5 is_stmt 1 view .LVU47
ARM GAS  /tmp/ccxdJPvT.s 			page 6


 177              		.loc 1 106 26 is_stmt 0 view .LVU48
 178 0034 0393     		str	r3, [sp, #12]
 107:Board/v3/Src/spi.c ****     GPIO_InitStruct.Speed = GPIO_SPEED_FREQ_MEDIUM;
 179              		.loc 1 107 5 is_stmt 1 view .LVU49
 180              		.loc 1 107 27 is_stmt 0 view .LVU50
 181 0036 0127     		movs	r7, #1
 182 0038 0497     		str	r7, [sp, #16]
 108:Board/v3/Src/spi.c ****     GPIO_InitStruct.Alternate = GPIO_AF6_SPI3;
 183              		.loc 1 108 5 is_stmt 1 view .LVU51
 184              		.loc 1 108 31 is_stmt 0 view .LVU52
 185 003a 0623     		movs	r3, #6
 186 003c 0593     		str	r3, [sp, #20]
 109:Board/v3/Src/spi.c ****     HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 187              		.loc 1 109 5 is_stmt 1 view .LVU53
 188 003e 334E     		ldr	r6, .L22+4
 189 0040 01A9     		add	r1, sp, #4
 190 0042 3046     		mov	r0, r6
 191              	.LVL3:
 192              		.loc 1 109 5 is_stmt 0 view .LVU54
 193 0044 FFF7FEFF 		bl	HAL_GPIO_Init
 194              	.LVL4:
 110:Board/v3/Src/spi.c **** 
 111:Board/v3/Src/spi.c ****     // MISO pull-up required for disconnect detection on SPI encoders with even parity
 112:Board/v3/Src/spi.c ****     GPIO_InitStruct.Pin = GPIO_PIN_11;
 195              		.loc 1 112 5 is_stmt 1 view .LVU55
 196              		.loc 1 112 25 is_stmt 0 view .LVU56
 197 0048 4FF40063 		mov	r3, #2048
 198 004c 0193     		str	r3, [sp, #4]
 113:Board/v3/Src/spi.c ****     GPIO_InitStruct.Pull = GPIO_PULLUP;
 199              		.loc 1 113 5 is_stmt 1 view .LVU57
 200              		.loc 1 113 26 is_stmt 0 view .LVU58
 201 004e 0397     		str	r7, [sp, #12]
 114:Board/v3/Src/spi.c ****     HAL_GPIO_Init(GPIOC, &GPIO_InitStruct);
 202              		.loc 1 114 5 is_stmt 1 view .LVU59
 203 0050 01A9     		add	r1, sp, #4
 204 0052 3046     		mov	r0, r6
 205 0054 FFF7FEFF 		bl	HAL_GPIO_Init
 206              	.LVL5:
 115:Board/v3/Src/spi.c **** 
 116:Board/v3/Src/spi.c ****     /* SPI3 DMA Init */
 117:Board/v3/Src/spi.c ****     /* SPI3_TX Init */
 118:Board/v3/Src/spi.c ****     hdma_spi3_tx.Instance = DMA1_Stream7;
 207              		.loc 1 118 5 view .LVU60
 208              		.loc 1 118 27 is_stmt 0 view .LVU61
 209 0058 2D4B     		ldr	r3, .L22+8
 210 005a 2E4A     		ldr	r2, .L22+12
 211 005c 1A60     		str	r2, [r3]
 119:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.Channel = DMA_CHANNEL_0;
 212              		.loc 1 119 5 is_stmt 1 view .LVU62
 213              		.loc 1 119 31 is_stmt 0 view .LVU63
 214 005e 5D60     		str	r5, [r3, #4]
 120:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.Direction = DMA_MEMORY_TO_PERIPH;
 215              		.loc 1 120 5 is_stmt 1 view .LVU64
 216              		.loc 1 120 33 is_stmt 0 view .LVU65
 217 0060 4022     		movs	r2, #64
 218 0062 9A60     		str	r2, [r3, #8]
 121:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.PeriphInc = DMA_PINC_DISABLE;
ARM GAS  /tmp/ccxdJPvT.s 			page 7


 219              		.loc 1 121 5 is_stmt 1 view .LVU66
 220              		.loc 1 121 33 is_stmt 0 view .LVU67
 221 0064 DD60     		str	r5, [r3, #12]
 122:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.MemInc = DMA_MINC_ENABLE;
 222              		.loc 1 122 5 is_stmt 1 view .LVU68
 223              		.loc 1 122 30 is_stmt 0 view .LVU69
 224 0066 4FF48062 		mov	r2, #1024
 225 006a 1A61     		str	r2, [r3, #16]
 123:Board/v3/Src/spi.c **** 
 124:Board/v3/Src/spi.c ****     if(spiHandle->Init.DataSize == SPI_DATASIZE_8BIT){
 226              		.loc 1 124 5 is_stmt 1 view .LVU70
 227              		.loc 1 124 23 is_stmt 0 view .LVU71
 228 006c E368     		ldr	r3, [r4, #12]
 229              		.loc 1 124 7 view .LVU72
 230 006e 002B     		cmp	r3, #0
 231 0070 2FD1     		bne	.L9
 125:Board/v3/Src/spi.c ****       hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 232              		.loc 1 125 7 is_stmt 1 view .LVU73
 233              		.loc 1 125 45 is_stmt 0 view .LVU74
 234 0072 274B     		ldr	r3, .L22+8
 235 0074 5D61     		str	r5, [r3, #20]
 126:Board/v3/Src/spi.c ****       hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 236              		.loc 1 126 7 is_stmt 1 view .LVU75
 237              		.loc 1 126 42 is_stmt 0 view .LVU76
 238 0076 9D61     		str	r5, [r3, #24]
 239              	.L10:
 127:Board/v3/Src/spi.c ****     } else {
 128:Board/v3/Src/spi.c ****       hdma_spi3_tx.Init.PeriphDataAlignment = DMA_PDATAALIGN_HALFWORD;
 129:Board/v3/Src/spi.c ****       hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;      
 130:Board/v3/Src/spi.c ****     }
 131:Board/v3/Src/spi.c ****     
 132:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.Mode = DMA_NORMAL;
 240              		.loc 1 132 5 is_stmt 1 view .LVU77
 241              		.loc 1 132 28 is_stmt 0 view .LVU78
 242 0078 2548     		ldr	r0, .L22+8
 243 007a 0023     		movs	r3, #0
 244 007c C361     		str	r3, [r0, #28]
 133:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.Priority = DMA_PRIORITY_HIGH; // SPI TX must have higher priority than SPI RX
 245              		.loc 1 133 5 is_stmt 1 view .LVU79
 246              		.loc 1 133 32 is_stmt 0 view .LVU80
 247 007e 4FF40032 		mov	r2, #131072
 248 0082 0262     		str	r2, [r0, #32]
 134:Board/v3/Src/spi.c ****     hdma_spi3_tx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 249              		.loc 1 134 5 is_stmt 1 view .LVU81
 250              		.loc 1 134 32 is_stmt 0 view .LVU82
 251 0084 4362     		str	r3, [r0, #36]
 135:Board/v3/Src/spi.c ****     if (HAL_DMA_Init(&hdma_spi3_tx) != HAL_OK)
 252              		.loc 1 135 5 is_stmt 1 view .LVU83
 253              		.loc 1 135 9 is_stmt 0 view .LVU84
 254 0086 FFF7FEFF 		bl	HAL_DMA_Init
 255              	.LVL6:
 256              		.loc 1 135 8 view .LVU85
 257 008a 0028     		cmp	r0, #0
 258 008c 29D1     		bne	.L20
 259              	.L11:
 136:Board/v3/Src/spi.c ****     {
 137:Board/v3/Src/spi.c ****       _Error_Handler(__FILE__, __LINE__);
ARM GAS  /tmp/ccxdJPvT.s 			page 8


 138:Board/v3/Src/spi.c ****     }
 139:Board/v3/Src/spi.c **** 
 140:Board/v3/Src/spi.c ****     __HAL_LINKDMA(spiHandle,hdmatx,hdma_spi3_tx);
 260              		.loc 1 140 5 is_stmt 1 view .LVU86
 261              		.loc 1 140 5 view .LVU87
 262 008e 204B     		ldr	r3, .L22+8
 263 0090 A364     		str	r3, [r4, #72]
 264              		.loc 1 140 5 view .LVU88
 265 0092 9C63     		str	r4, [r3, #56]
 266              		.loc 1 140 5 view .LVU89
 141:Board/v3/Src/spi.c **** 
 142:Board/v3/Src/spi.c ****     /* SPI3_RX Init */
 143:Board/v3/Src/spi.c ****     hdma_spi3_rx.Instance = DMA1_Stream0;
 267              		.loc 1 143 5 view .LVU90
 268              		.loc 1 143 27 is_stmt 0 view .LVU91
 269 0094 204B     		ldr	r3, .L22+16
 270 0096 214A     		ldr	r2, .L22+20
 271 0098 1A60     		str	r2, [r3]
 144:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.Channel = DMA_CHANNEL_0;
 272              		.loc 1 144 5 is_stmt 1 view .LVU92
 273              		.loc 1 144 31 is_stmt 0 view .LVU93
 274 009a 0022     		movs	r2, #0
 275 009c 5A60     		str	r2, [r3, #4]
 145:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.Direction = DMA_PERIPH_TO_MEMORY;
 276              		.loc 1 145 5 is_stmt 1 view .LVU94
 277              		.loc 1 145 33 is_stmt 0 view .LVU95
 278 009e 9A60     		str	r2, [r3, #8]
 146:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.PeriphInc = DMA_PINC_DISABLE;
 279              		.loc 1 146 5 is_stmt 1 view .LVU96
 280              		.loc 1 146 33 is_stmt 0 view .LVU97
 281 00a0 DA60     		str	r2, [r3, #12]
 147:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.MemInc = DMA_MINC_ENABLE;
 282              		.loc 1 147 5 is_stmt 1 view .LVU98
 283              		.loc 1 147 30 is_stmt 0 view .LVU99
 284 00a2 4FF48062 		mov	r2, #1024
 285 00a6 1A61     		str	r2, [r3, #16]
 148:Board/v3/Src/spi.c ****     if (spiHandle->Init.DataSize == SPI_DATASIZE_8BIT) {
 286              		.loc 1 148 5 is_stmt 1 view .LVU100
 287              		.loc 1 148 24 is_stmt 0 view .LVU101
 288 00a8 E368     		ldr	r3, [r4, #12]
 289              		.loc 1 148 8 view .LVU102
 290 00aa FBB9     		cbnz	r3, .L12
 149:Board/v3/Src/spi.c ****         hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_BYTE;
 291              		.loc 1 149 9 is_stmt 1 view .LVU103
 292              		.loc 1 149 47 is_stmt 0 view .LVU104
 293 00ac 1A4B     		ldr	r3, .L22+16
 294 00ae 0022     		movs	r2, #0
 295 00b0 5A61     		str	r2, [r3, #20]
 150:Board/v3/Src/spi.c ****         hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_BYTE;
 296              		.loc 1 150 9 is_stmt 1 view .LVU105
 297              		.loc 1 150 44 is_stmt 0 view .LVU106
 298 00b2 9A61     		str	r2, [r3, #24]
 299              	.L13:
 151:Board/v3/Src/spi.c ****     } else {
 152:Board/v3/Src/spi.c ****         hdma_spi3_rx.Init.PeriphDataAlignment = DMA_PDATAALIGN_HALFWORD;
 153:Board/v3/Src/spi.c ****         hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 154:Board/v3/Src/spi.c ****     }
ARM GAS  /tmp/ccxdJPvT.s 			page 9


 155:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.Mode = DMA_NORMAL;
 300              		.loc 1 155 5 is_stmt 1 view .LVU107
 301              		.loc 1 155 28 is_stmt 0 view .LVU108
 302 00b4 1848     		ldr	r0, .L22+16
 303 00b6 0023     		movs	r3, #0
 304 00b8 C361     		str	r3, [r0, #28]
 156:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.Priority = DMA_PRIORITY_MEDIUM;
 305              		.loc 1 156 5 is_stmt 1 view .LVU109
 306              		.loc 1 156 32 is_stmt 0 view .LVU110
 307 00ba 4FF48032 		mov	r2, #65536
 308 00be 0262     		str	r2, [r0, #32]
 157:Board/v3/Src/spi.c ****     hdma_spi3_rx.Init.FIFOMode = DMA_FIFOMODE_DISABLE;
 309              		.loc 1 157 5 is_stmt 1 view .LVU111
 310              		.loc 1 157 32 is_stmt 0 view .LVU112
 311 00c0 4362     		str	r3, [r0, #36]
 158:Board/v3/Src/spi.c ****     if (HAL_DMA_Init(&hdma_spi3_rx) != HAL_OK)
 312              		.loc 1 158 5 is_stmt 1 view .LVU113
 313              		.loc 1 158 9 is_stmt 0 view .LVU114
 314 00c2 FFF7FEFF 		bl	HAL_DMA_Init
 315              	.LVL7:
 316              		.loc 1 158 8 view .LVU115
 317 00c6 C8B9     		cbnz	r0, .L21
 318              	.L14:
 159:Board/v3/Src/spi.c ****     {
 160:Board/v3/Src/spi.c ****       _Error_Handler(__FILE__, __LINE__);
 161:Board/v3/Src/spi.c ****     }
 162:Board/v3/Src/spi.c **** 
 163:Board/v3/Src/spi.c ****     __HAL_LINKDMA(spiHandle,hdmarx,hdma_spi3_rx);
 319              		.loc 1 163 5 is_stmt 1 view .LVU116
 320              		.loc 1 163 5 view .LVU117
 321 00c8 134B     		ldr	r3, .L22+16
 322 00ca E364     		str	r3, [r4, #76]
 323              		.loc 1 163 5 view .LVU118
 324 00cc 9C63     		str	r4, [r3, #56]
 325              		.loc 1 163 5 view .LVU119
 164:Board/v3/Src/spi.c **** 
 165:Board/v3/Src/spi.c ****     /* SPI3 interrupt Init */
 166:Board/v3/Src/spi.c ****     //HAL_NVIC_SetPriority(SPI3_IRQn, 3, 0);
 167:Board/v3/Src/spi.c ****     //HAL_NVIC_EnableIRQ(SPI3_IRQn);
 168:Board/v3/Src/spi.c ****   /* USER CODE BEGIN SPI3_MspInit 1 */
 169:Board/v3/Src/spi.c **** 
 170:Board/v3/Src/spi.c ****   /* USER CODE END SPI3_MspInit 1 */
 171:Board/v3/Src/spi.c ****   }
 172:Board/v3/Src/spi.c **** }
 326              		.loc 1 172 1 is_stmt 0 view .LVU120
 327 00ce 07B0     		add	sp, sp, #28
 328              	.LCFI3:
 329              		.cfi_remember_state
 330              		.cfi_def_cfa_offset 20
 331              		@ sp needed
 332 00d0 F0BD     		pop	{r4, r5, r6, r7, pc}
 333              	.LVL8:
 334              	.L9:
 335              	.LCFI4:
 336              		.cfi_restore_state
 128:Board/v3/Src/spi.c ****       hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;      
 337              		.loc 1 128 7 is_stmt 1 view .LVU121
ARM GAS  /tmp/ccxdJPvT.s 			page 10


 128:Board/v3/Src/spi.c ****       hdma_spi3_tx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;      
 338              		.loc 1 128 45 is_stmt 0 view .LVU122
 339 00d2 0F4B     		ldr	r3, .L22+8
 340 00d4 4FF40062 		mov	r2, #2048
 341 00d8 5A61     		str	r2, [r3, #20]
 129:Board/v3/Src/spi.c ****     }
 342              		.loc 1 129 7 is_stmt 1 view .LVU123
 129:Board/v3/Src/spi.c ****     }
 343              		.loc 1 129 42 is_stmt 0 view .LVU124
 344 00da 4FF40052 		mov	r2, #8192
 345 00de 9A61     		str	r2, [r3, #24]
 346 00e0 CAE7     		b	.L10
 347              	.L20:
 137:Board/v3/Src/spi.c ****     }
 348              		.loc 1 137 7 is_stmt 1 view .LVU125
 349 00e2 8921     		movs	r1, #137
 350 00e4 0E48     		ldr	r0, .L22+24
 351 00e6 FFF7FEFF 		bl	_Error_Handler
 352              	.LVL9:
 353 00ea D0E7     		b	.L11
 354              	.L12:
 152:Board/v3/Src/spi.c ****         hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 355              		.loc 1 152 9 view .LVU126
 152:Board/v3/Src/spi.c ****         hdma_spi3_rx.Init.MemDataAlignment = DMA_MDATAALIGN_HALFWORD;
 356              		.loc 1 152 47 is_stmt 0 view .LVU127
 357 00ec 0A4B     		ldr	r3, .L22+16
 358 00ee 4FF40062 		mov	r2, #2048
 359 00f2 5A61     		str	r2, [r3, #20]
 153:Board/v3/Src/spi.c ****     }
 360              		.loc 1 153 9 is_stmt 1 view .LVU128
 153:Board/v3/Src/spi.c ****     }
 361              		.loc 1 153 44 is_stmt 0 view .LVU129
 362 00f4 4FF40052 		mov	r2, #8192
 363 00f8 9A61     		str	r2, [r3, #24]
 364 00fa DBE7     		b	.L13
 365              	.L21:
 160:Board/v3/Src/spi.c ****     }
 366              		.loc 1 160 7 is_stmt 1 view .LVU130
 367 00fc A021     		movs	r1, #160
 368 00fe 0848     		ldr	r0, .L22+24
 369 0100 FFF7FEFF 		bl	_Error_Handler
 370              	.LVL10:
 371 0104 E0E7     		b	.L14
 372              	.L23:
 373 0106 00BF     		.align	2
 374              	.L22:
 375 0108 003C0040 		.word	1073757184
 376 010c 00080240 		.word	1073874944
 377 0110 00000000 		.word	.LANCHOR1
 378 0114 B8600240 		.word	1073897656
 379 0118 00000000 		.word	.LANCHOR2
 380 011c 10600240 		.word	1073897488
 381 0120 00000000 		.word	.LC0
 382              		.cfi_endproc
 383              	.LFE134:
 385              		.section	.text.HAL_SPI_MspDeInit,"ax",%progbits
 386              		.align	1
ARM GAS  /tmp/ccxdJPvT.s 			page 11


 387              		.global	HAL_SPI_MspDeInit
 388              		.syntax unified
 389              		.thumb
 390              		.thumb_func
 392              	HAL_SPI_MspDeInit:
 393              	.LVL11:
 394              	.LFB135:
 173:Board/v3/Src/spi.c **** 
 174:Board/v3/Src/spi.c **** void HAL_SPI_MspDeInit(SPI_HandleTypeDef* spiHandle)
 175:Board/v3/Src/spi.c **** {
 395              		.loc 1 175 1 view -0
 396              		.cfi_startproc
 397              		@ args = 0, pretend = 0, frame = 0
 398              		@ frame_needed = 0, uses_anonymous_args = 0
 176:Board/v3/Src/spi.c **** 
 177:Board/v3/Src/spi.c ****   if(spiHandle->Instance==SPI3)
 399              		.loc 1 177 3 view .LVU132
 400              		.loc 1 177 15 is_stmt 0 view .LVU133
 401 0000 0268     		ldr	r2, [r0]
 402              		.loc 1 177 5 view .LVU134
 403 0002 0D4B     		ldr	r3, .L31
 404 0004 9A42     		cmp	r2, r3
 405 0006 00D0     		beq	.L30
 406 0008 7047     		bx	lr
 407              	.L30:
 175:Board/v3/Src/spi.c **** 
 408              		.loc 1 175 1 view .LVU135
 409 000a 10B5     		push	{r4, lr}
 410              	.LCFI5:
 411              		.cfi_def_cfa_offset 8
 412              		.cfi_offset 4, -8
 413              		.cfi_offset 14, -4
 414 000c 0446     		mov	r4, r0
 178:Board/v3/Src/spi.c ****   {
 179:Board/v3/Src/spi.c ****   /* USER CODE BEGIN SPI3_MspDeInit 0 */
 180:Board/v3/Src/spi.c **** 
 181:Board/v3/Src/spi.c ****   /* USER CODE END SPI3_MspDeInit 0 */
 182:Board/v3/Src/spi.c ****     /* Peripheral clock disable */
 183:Board/v3/Src/spi.c ****     __HAL_RCC_SPI3_CLK_DISABLE();
 415              		.loc 1 183 5 is_stmt 1 view .LVU136
 416 000e 0B4A     		ldr	r2, .L31+4
 417 0010 136C     		ldr	r3, [r2, #64]
 418 0012 23F40043 		bic	r3, r3, #32768
 419 0016 1364     		str	r3, [r2, #64]
 184:Board/v3/Src/spi.c ****   
 185:Board/v3/Src/spi.c ****     /**SPI3 GPIO Configuration    
 186:Board/v3/Src/spi.c ****     PC10     ------> SPI3_SCK
 187:Board/v3/Src/spi.c ****     PC11     ------> SPI3_MISO
 188:Board/v3/Src/spi.c ****     PC12     ------> SPI3_MOSI 
 189:Board/v3/Src/spi.c ****     */
 190:Board/v3/Src/spi.c ****     HAL_GPIO_DeInit(GPIOC, GPIO_PIN_10|GPIO_PIN_11|GPIO_PIN_12);
 420              		.loc 1 190 5 view .LVU137
 421 0018 4FF4E051 		mov	r1, #7168
 422 001c 0848     		ldr	r0, .L31+8
 423              	.LVL12:
 424              		.loc 1 190 5 is_stmt 0 view .LVU138
 425 001e FFF7FEFF 		bl	HAL_GPIO_DeInit
ARM GAS  /tmp/ccxdJPvT.s 			page 12


 426              	.LVL13:
 191:Board/v3/Src/spi.c **** 
 192:Board/v3/Src/spi.c ****     /* SPI3 DMA DeInit */
 193:Board/v3/Src/spi.c ****     HAL_DMA_DeInit(spiHandle->hdmatx);
 427              		.loc 1 193 5 is_stmt 1 view .LVU139
 428 0022 A06C     		ldr	r0, [r4, #72]
 429 0024 FFF7FEFF 		bl	HAL_DMA_DeInit
 430              	.LVL14:
 194:Board/v3/Src/spi.c ****     HAL_DMA_DeInit(spiHandle->hdmarx);
 431              		.loc 1 194 5 view .LVU140
 432 0028 E06C     		ldr	r0, [r4, #76]
 433 002a FFF7FEFF 		bl	HAL_DMA_DeInit
 434              	.LVL15:
 195:Board/v3/Src/spi.c **** 
 196:Board/v3/Src/spi.c ****     /* SPI3 interrupt Deinit */
 197:Board/v3/Src/spi.c ****     HAL_NVIC_DisableIRQ(SPI3_IRQn);
 435              		.loc 1 197 5 view .LVU141
 436 002e 3320     		movs	r0, #51
 437 0030 FFF7FEFF 		bl	HAL_NVIC_DisableIRQ
 438              	.LVL16:
 198:Board/v3/Src/spi.c ****   /* USER CODE BEGIN SPI3_MspDeInit 1 */
 199:Board/v3/Src/spi.c **** 
 200:Board/v3/Src/spi.c ****   /* USER CODE END SPI3_MspDeInit 1 */
 201:Board/v3/Src/spi.c ****   }
 202:Board/v3/Src/spi.c **** } 
 439              		.loc 1 202 1 is_stmt 0 view .LVU142
 440 0034 10BD     		pop	{r4, pc}
 441              	.LVL17:
 442              	.L32:
 443              		.loc 1 202 1 view .LVU143
 444 0036 00BF     		.align	2
 445              	.L31:
 446 0038 003C0040 		.word	1073757184
 447 003c 00380240 		.word	1073887232
 448 0040 00080240 		.word	1073874944
 449              		.cfi_endproc
 450              	.LFE135:
 452              		.global	hdma_spi3_rx
 453              		.global	hdma_spi3_tx
 454              		.global	hspi3
 455              		.section	.bss.hdma_spi3_rx,"aw",%nobits
 456              		.align	2
 457              		.set	.LANCHOR2,. + 0
 460              	hdma_spi3_rx:
 461 0000 00000000 		.space	96
 461      00000000 
 461      00000000 
 461      00000000 
 461      00000000 
 462              		.section	.bss.hdma_spi3_tx,"aw",%nobits
 463              		.align	2
 464              		.set	.LANCHOR1,. + 0
 467              	hdma_spi3_tx:
 468 0000 00000000 		.space	96
 468      00000000 
 468      00000000 
 468      00000000 
ARM GAS  /tmp/ccxdJPvT.s 			page 13


 468      00000000 
 469              		.section	.bss.hspi3,"aw",%nobits
 470              		.align	2
 471              		.set	.LANCHOR0,. + 0
 474              	hspi3:
 475 0000 00000000 		.space	88
 475      00000000 
 475      00000000 
 475      00000000 
 475      00000000 
 476              		.text
 477              	.Letext0:
 478              		.file 2 "/opt/gcc-arm-none-eabi/arm-none-eabi/include/machine/_default_types.h"
 479              		.file 3 "/opt/gcc-arm-none-eabi/arm-none-eabi/include/sys/_stdint.h"
 480              		.file 4 "ThirdParty/CMSIS/Device/ST/STM32F4xx/Include/stm32f405xx.h"
 481              		.file 5 "ThirdParty/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_def.h"
 482              		.file 6 "ThirdParty/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_gpio.h"
 483              		.file 7 "ThirdParty/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_dma.h"
 484              		.file 8 "ThirdParty/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_spi.h"
 485              		.file 9 "Board/v3/Inc/spi.h"
 486              		.file 10 "ThirdParty/STM32F4xx_HAL_Driver/Inc/stm32f4xx_hal_cortex.h"
 487              		.file 11 "Board/v3/Inc/dma.h"
ARM GAS  /tmp/ccxdJPvT.s 			page 14


DEFINED SYMBOLS
                            *ABS*:0000000000000000 spi.c
     /tmp/ccxdJPvT.s:20     .rodata.MX_SPI3_Init.str1.4:0000000000000000 $d
     /tmp/ccxdJPvT.s:24     .text.MX_SPI3_Init:0000000000000000 $t
     /tmp/ccxdJPvT.s:30     .text.MX_SPI3_Init:0000000000000000 MX_SPI3_Init
     /tmp/ccxdJPvT.s:107    .text.MX_SPI3_Init:0000000000000044 $d
     /tmp/ccxdJPvT.s:114    .text.HAL_SPI_MspInit:0000000000000000 $t
     /tmp/ccxdJPvT.s:120    .text.HAL_SPI_MspInit:0000000000000000 HAL_SPI_MspInit
     /tmp/ccxdJPvT.s:375    .text.HAL_SPI_MspInit:0000000000000108 $d
     /tmp/ccxdJPvT.s:386    .text.HAL_SPI_MspDeInit:0000000000000000 $t
     /tmp/ccxdJPvT.s:392    .text.HAL_SPI_MspDeInit:0000000000000000 HAL_SPI_MspDeInit
     /tmp/ccxdJPvT.s:446    .text.HAL_SPI_MspDeInit:0000000000000038 $d
     /tmp/ccxdJPvT.s:460    .bss.hdma_spi3_rx:0000000000000000 hdma_spi3_rx
     /tmp/ccxdJPvT.s:467    .bss.hdma_spi3_tx:0000000000000000 hdma_spi3_tx
     /tmp/ccxdJPvT.s:474    .bss.hspi3:0000000000000000 hspi3
     /tmp/ccxdJPvT.s:456    .bss.hdma_spi3_rx:0000000000000000 $d
     /tmp/ccxdJPvT.s:463    .bss.hdma_spi3_tx:0000000000000000 $d
     /tmp/ccxdJPvT.s:470    .bss.hspi3:0000000000000000 $d

UNDEFINED SYMBOLS
HAL_SPI_Init
_Error_Handler
HAL_GPIO_Init
HAL_DMA_Init
HAL_GPIO_DeInit
HAL_DMA_DeInit
HAL_NVIC_DisableIRQ
